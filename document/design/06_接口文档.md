# 接口文档

## 1. 人脸识别服务接口

### 1.1 人脸数据管理

#### 1.1.1 添加人脸数据
- **接口URL**: `/api/recognition/face/add`
- **请求方式**: POST
- **请求参数**:
  ```json
  {
    "image": "文件",
    "studentId": "整数"
  }
  ```
- **响应结果**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "success": true
    }
  }
  ```

#### 1.1.2 更新人脸数据
- **接口URL**: `/api/recognition/face/update`
- **请求方式**: POST
- **请求参数**:
  ```json
  {
    "image": "文件",
    "studentId": "整数"
  }
  ```
- **响应结果**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "success": true
    }
  }
  ```

#### 1.1.3 删除人脸数据
- **接口URL**: `/api/recognition/face/delete/{faceId}`
- **请求方式**: DELETE
- **请求参数**: 无
- **响应结果**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "success": true
    }
  }
  ```

#### 1.1.4 获取人脸数据
- **接口URL**: `/api/recognition/face/get/{faceId}`
- **请求方式**: GET
- **请求参数**: 无
- **响应结果**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "id": "整数",
      "studentId": "整数",
      "faceToken": "字符串",
      "imageUrl": "字符串",
      "quality": "浮点数",
      "faceType": "字符串",
      "age": "整数",
      "gender": "字符串",
      "expression": "字符串",
      "glasses": "字符串",
      "emotion": "字符串",
      "faceShape": "字符串",
      "createTime": "日期时间",
      "updateTime": "日期时间",
      "status": "整数"
    }
  }
  ```

### 1.2 人脸识别

#### 1.2.1 人脸验证
- **接口URL**: `/api/recognition/face/verify`
- **请求方式**: POST
- **请求参数**:
  ```json
  {
    "image": "文件",
    "studentId": "整数"
  }
  ```
- **响应结果**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "success": true
    }
  }
  ```

### 1.3 识别日志

#### 1.3.1 获取识别日志
- **接口URL**: `/api/recognition/log/list/{studentId}`
- **请求方式**: GET
- **请求参数**: 无
- **响应结果**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": "整数",
        "studentId": "整数",
        "faceToken": "字符串",
        "imageUrl": "字符串",
        "similarity": "浮点数",
        "recognitionType": "字符串",
        "recognitionResult": "字符串",
        "createTime": "日期时间",
        "status": "整数"
      }
    ]
  }
  ```

#### 1.3.2 获取识别统计
- **接口URL**: `/api/recognition/log/statistics/{studentId}`
- **请求方式**: GET
- **请求参数**: 无
- **响应结果**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "totalCount": "整数",
      "successCount": "整数",
      "failureCount": "整数",
      "avgSimilarity": "浮点数"
    }
  }
  ```

## 2. 错误码说明

| 错误码 | 说明 |
|--------|------|
| 200 | 成功 |
| 400 | 请求参数错误 |
| 401 | 未授权 |
| 403 | 禁止访问 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

## 3. 接口规范

### 3.1 请求规范
1. 所有请求使用UTF-8编码
2. 请求头Content-Type: application/json
3. 文件上传使用multipart/form-data
4. 时间格式：yyyy-MM-dd HH:mm:ss

### 3.2 响应规范
1. 所有响应使用JSON格式
2. 统一响应结构：
   ```json
   {
     "code": "整数",
     "message": "字符串",
     "data": "对象"
   }
   ```
3. 分页响应结构：
   ```json
   {
     "code": "整数",
     "message": "字符串",
     "data": {
       "total": "整数",
       "list": "数组",
       "pageNum": "整数",
       "pageSize": "整数"
     }
   }
   ```

### 3.3 安全规范
1. 所有接口需要进行身份认证
2. 敏感数据需要进行加密传输
3. 文件上传需要进行类型和大小限制
4. 接口需要进行访问频率限制 